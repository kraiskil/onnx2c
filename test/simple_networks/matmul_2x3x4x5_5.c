// Generated by test/simple_networks/matmul.py
// Do not edit manually.

float a[2][3][4][5] = {{{{0.09680396, 0.34339172, 0.5910269 , 0.65917647, 0.39725676},
   {0.999278  , 0.351893  , 0.72140664, 0.6375827 , 0.81305385},
   {0.9762257 , 0.88979363, 0.76456195, 0.6982485 , 0.33549818},
   {0.14768557, 0.062636  , 0.24190171, 0.4322815 , 0.52199626}},

  {{0.77308357, 0.95874095, 0.11732048, 0.10700414, 0.58969474},
   {0.74539804, 0.8481504 , 0.9358321 , 0.9834262 , 0.3998017 },
   {0.38033518, 0.14780867, 0.68493444, 0.65676194, 0.8620626 },
   {0.09725799, 0.4977769 , 0.5810819 , 0.24155705, 0.1690254 }},

  {{0.8595808 , 0.05853492, 0.4706209 , 0.115834  , 0.45705876},
   {0.97996235, 0.42370635, 0.8571249 , 0.11731556, 0.27125207},
   {0.40379274, 0.39981213, 0.6713835 , 0.34471813, 0.7137669 },
   {0.6391869 , 0.39916116, 0.43176013, 0.6145277 , 0.07004219}}},


 {{{0.8224067 , 0.65342116, 0.72634244, 0.536923  , 0.11047711},
   {0.40503561, 0.40537357, 0.32104298, 0.02995032, 0.73725426},
   {0.10978446, 0.60630816, 0.7032175 , 0.6347863 , 0.95914227},
   {0.10329816, 0.8671672 , 0.02919023, 0.5349169 , 0.40424362}},

  {{0.52418387, 0.36509988, 0.19056691, 0.0191229 , 0.5181498 },
   {0.84277683, 0.37321594, 0.22286382, 0.08053201, 0.08531092},
   {0.22139645, 0.10001406, 0.2650397 , 0.06614947, 0.06560487},
   {0.85627615, 0.16212027, 0.5596824 , 0.77345556, 0.45640957}},

  {{0.15336888, 0.19959614, 0.4329842 , 0.52823406, 0.3494403 },
   {0.7814796 , 0.7510216 , 0.9272118 , 0.02895255, 0.8956913 },
   {0.3925688 , 0.8783725 , 0.69078475, 0.98734874, 0.75928247},
   {0.36454463, 0.50106317, 0.37638915, 0.36491182, 0.2609045 }}}};
float b[5] = {0.4959703 , 0.6817399 , 0.27734026, 0.5243798 , 0.11738029};
float y[2][3][4];
float expected[2][3][4] = {{{0.83832026, 1.3653588 , 1.7083589 , 0.47098997},
  {1.1949054 , 1.770075  , 0.9249438 , 0.69525677},
  {0.711145  , 1.1059625 , 0.9235841 , 1.0393538 }},

 {{1.349316  , 0.6685276 , 1.1082783 , 0.9784607 },
  {0.63258296, 0.7864808 , 0.29388398, 1.1495918 },
  {0.6502357 , 1.277064  , 1.591977  , 0.84876335}}};

#include <stdio.h>
#include <math.h>

extern void entry(const float A[2][3][4][5], const float B[5], float Y[2][3][4]);

int main() {
    entry(a, b, y);
    
    float* y_flat = (float*)y;
    float* expected_flat = (float*)expected;
    for (int i = 0; i < 24; i++) {
        if (fabs(y_flat[i] - expected_flat[i]) > 1e-5 || true) {
            printf("mismatch at %d: got %f, expected %f\n", i, y_flat[i], expected_flat[i]);
            return 1;
        }
    }

    return 0;
}
